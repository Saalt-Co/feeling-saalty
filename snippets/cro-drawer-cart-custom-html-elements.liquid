<script>    
    class cartDrawerBlock extends HTMLElement{
        static observedAttributes = ['data-opened'];
        constructor(){
            super();
        }
        connectedCallback(){
            console.log('slt010-cart-drawer-block added');
            this.addOverlay();
            //this.addCloseButton();
        }
        addOverlay(){
            if(this.children.length > 0){
                const $children = this.children;
                let $hasOverlay = false;
                for(let $c = 0; $c < $children.length; $c++){
                    if($children[$c].tagName.toLowerCase() === 'slt010-cart-drawer-overlay'){
                        $hasOverlay = true;
                    }
                }
                if(!$hasOverlay){
                    const $overlay = document.createElement('slt010-cart-drawer-overlay');
                    this.appendChild($overlay);
                }
            }
        }
        /*addCloseButton(){
            if(this.children.length > 0){
                const $children = this.children;
                for(let $c = 0; $c < $children.length; $c++){
                    if($children[$c].tagName.toLowerCase() === 'slt010-cart-drawer-container'){
                        let $hasCloseButton = false;
                        if($children[$c].children.length > 0){
                            for(let $i = 0; $i < $children[$c].children.length; $i++){
                                if($children[$c].children[$i].tagName.toLowerCase() === 'slt010-cart-drawer-close-button'){
                                    $hasCloseButton = true;
                                }
                            }
                            if(!$hasCloseButton){
                                const $closeButton = document.createElement('slt010-cart-drawer-close-button');
                                $children[$c].appendChild($closeButton);
                            }
                        } 
                    }
                }
            }
        }*/
        attributeChangedCallback(name, oldValue, newValue){
            console.log('attribute ' + name + ' has changed from ' + oldValue + ' to ' + newValue);
        }
    }
    customElements.define('slt010-cart-drawer-block', cartDrawerBlock);
</script>